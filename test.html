<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RoyalCrime â€” Final Showcase</title>
  <style>
    :root{
      --ink:#0D1B2A;
      --gold:#C6A974;
      --white:#f5f7fa;
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;background:#000;color:var(--white);font-family:"Cairo",system-ui,Arial}
    #app{position:fixed;inset:0;overflow:hidden}

    .hud{position:fixed;inset:0;pointer-events:none}
    .brand{position:absolute;top:16px;left:16px;display:flex;gap:12px;align-items:center;pointer-events:auto}
    .logo{width:42px;height:42px;border-radius:50%;
      background:conic-gradient(from 90deg,var(--gold),#b8965e 30%,#6b532f 60%,var(--gold));
      box-shadow:0 0 24px #c6a97466, inset 0 0 12px #fff3}
    .title{font-weight:900;letter-spacing:.4px}
    .title small{display:block;color:#cbd5e1;font-weight:600;opacity:.9}

    .footer{position:absolute;right:16px;bottom:16px;display:flex;gap:10px;align-items:center;pointer-events:auto}
    .badge{padding:8px 12px;border-radius:999px;background:linear-gradient(180deg,#082032,#041019);
      border:1px solid #103047;box-shadow:0 6px 22px #0008;color:#cbd5e1;font-size:12px}
    .cta{padding:14px 22px;border-radius:14px;border:1px solid #715c35;
      background:linear-gradient(180deg,#2b2112,#0e0c08);color:var(--gold);font-weight:800;font-size:16px;letter-spacing:.5px;cursor:pointer;
      box-shadow:0 10px 30px #000a, inset 0 0 0 1px #c6a97444;transition:transform .25s ease, box-shadow .25s ease}
    .cta:hover{transform:translateY(-2px);box-shadow:0 12px 40px #000c, 0 0 24px #c6a97433}

    .hint{position:absolute;top:16px;right:16px;background:linear-gradient(180deg,#082032,#041019);
      border:1px solid #103047;color:#dbeafe;padding:10px 14px;border-radius:12px;box-shadow:0 10px 30px #000a}
    .toast{position:absolute;right:16px;bottom:72px;max-width:320px;background:linear-gradient(180deg,#2b2112,#0e0c08);
      color:var(--gold);border:1px solid #715c35;border-radius:12px;padding:10px 14px;box-shadow:0 10px 30px #000a;opacity:0;transform:translateY(12px)}
    .toast.show{opacity:1;transform:translateY(0);transition:opacity .4s, transform .4s}

    .intro{position:fixed;inset:0;background:#000;display:grid;place-items:center;z-index:10}
    .intro.hidden{opacity:0;visibility:hidden;transition:opacity .8s ease .2s, visibility 0s .9s}
    .shine{width:min(80vw,480px);height:80px;border:1px solid #103047;border-radius:14px;
      background:linear-gradient(90deg,#05121d,#0a2031,#05121d);position:relative;overflow:hidden;box-shadow:0 10px 40px #000a, inset 0 0 40px #041019}
    .shine::before{content:"";position:absolute;inset:0;background:linear-gradient(90deg, transparent, #4fa3ff33, transparent);
      transform:translateX(-100%);animation:scan 3s ease-in-out infinite}
    @keyframes scan{50%{transform:translateX(100%)}100%{transform:translateX(100%)}}
  </style>
</head>
<body>
  <div id="app"></div>
  <div class="hud">
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <div class="title">Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ© Ù„Ù„ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø°ÙƒÙŠ
        <small>Academy of Sharjah Police Sciences â€” Royal Crime Intelligence</small>
      </div>
    </div>
    <div class="footer">
      <div class="badge">AI Investigator Ready</div>
      <button id="startBtn" class="cta">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø¢Ù†</button>
    </div>
    <div class="hint" id="hint">ğŸ‘ï¸â€ğŸ—¨ï¸ Ø­Ø±Ù‘Ùƒ Ø§Ù„ÙØ£Ø±Ø©/Ø§Ù„Ù…Ø³ Ù„ØªÙØ­Øµ Ø§Ù„ØªÙØ§ØµÙŠÙ„â€¦ Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© ÙÙŠ Ø§Ù„ØªÙØ§ØµÙŠÙ„</div>
    <div class="toast" id="toast">Ø¬Ø§Ù‡Ø²â€¦ Ø§Ø¯Ø®Ù„ Ø§Ù„ØºØ±ÙØ© ÙˆØªÙØ­Ù‘Øµ Ø§Ù„Ø·Ø§ÙˆÙ„Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©.</div>
  </div>
  <div class="intro" id="intro"><div class="shine"></div></div>

  <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
  <script src="https://unpkg.com/three@0.160.0/examples/js/loaders/GLTFLoader.js"></script>
  <script src="https://unpkg.com/three@0.160.0/examples/js/controls/OrbitControls.js"></script>

  <script>
    const ROOM_GLB = "http://dns3uae-glitch.github.io/crime-book-ai/assets/room.glb"; // Ø§Ù„ØºØ±ÙØ© Ø§Ù„ØªÙŠ Ø·Ù„Ø¨ØªÙ‡Ø§

    let scene, camera, renderer, controls, clock; 
    let started = false;

    init();
    animate();

    function init(){
      scene = new THREE.Scene();
      scene.background = new THREE.Color(0x0D1B2A);
      clock = new THREE.Clock();

      camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 200);
      camera.position.set(-6, 2, 10);

      renderer = new THREE.WebGLRenderer({antialias:true});
      renderer.setSize(innerWidth, innerHeight);
      renderer.setPixelRatio(Math.min(devicePixelRatio,2));
      document.getElementById('app').appendChild(renderer.domElement);

      const amb = new THREE.AmbientLight(0x8899aa, .7); scene.add(amb);
      const key = new THREE.DirectionalLight(0xffffff, 1.2); key.position.set(3,5,2); scene.add(key);
      const rim = new THREE.SpotLight(0xC6A974, .7, 20, Math.PI/6, .3, 1); rim.position.set(0,6,4); scene.add(rim);

      const loader = new THREE.GLTFLoader();
      loader.load(ROOM_GLB, gltf => { scene.add(gltf.scene); }, undefined, err => {
        console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØºØ±ÙØ©:', err);
      });

      controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.enabled = false;

      window.addEventListener('resize', onResize);
      flyIn();

      document.getElementById('startBtn').addEventListener('click', onStart);
    }

    function flyIn(){
      const start = {x:-10, y:2.0, z:12};
      const end   = {x:-2.8, y:1.4, z:3.4};
      camera.position.set(start.x, start.y, start.z);
      camera.lookAt(0,1.2,-1.2);
      const D = 3.2, t0 = performance.now();
      function step(){
        const t = (performance.now()-t0)/1000;
        const k = Math.min(t/D, 1);
        const e = 1 - Math.pow(1-k,3);
        camera.position.lerpVectors(
          new THREE.Vector3(start.x,start.y,start.z),
          new THREE.Vector3(end.x,end.y,end.z), e
        );
        camera.lookAt(0,1.0,-1.2);
        if(k<1) requestAnimationFrame(step);
      }
      requestAnimationFrame(step);
    }

    function onResize(){
      camera.aspect = innerWidth/innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(innerWidth, innerHeight);
    }

    function animate(){
      requestAnimationFrame(animate);
      if(controls) controls.update();
      renderer.render(scene, camera);
    }

    function onStart(){
      if(started) return;
      started = true;
      document.getElementById('intro').classList.add('hidden');
      controls.enabled = true;
      playIntroVoice();
      toast("ØªÙ… Ø±ØµØ¯ Ø§Ù†Ø¹ÙƒØ§Ø³ ØºÙŠØ± Ø·Ø¨ÙŠØ¹ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§ÙˆÙ„Ø© â€” Ø§ÙØ­ØµÙ‡ ÙŠØ§ Ù…Ø­Ù‚Ù‚ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©.");
    }

    function playIntroVoice(){
      try{
        const u = new SpeechSynthesisUtterance("ÙŠØ§ Ù‡Ù„Ø§ ÙÙŠÙƒ ÙŠØ§ Ù…Ø­Ù‚Ù‚ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©â€¦ Ø±ÙƒÙ‘Ø²ØŒ Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© ÙÙŠ Ø§Ù„ØªÙØ§ØµÙŠÙ„.");
        u.lang = 'ar-SA'; u.rate = 0.95; u.pitch = 1; u.volume = 1;
        speechSynthesis.speak(u);
      }catch(e){ console.warn('Speech not available'); }
    }

    function toast(msg){
      const el = document.getElementById('toast');
      el.textContent = msg;
      el.classList.add('show');
      setTimeout(()=> el.classList.remove('show'), 4200);
    }
  </script>
</body>
</html>
